begin_unit
begin_comment
comment|/*  * Licensed to the Apache Software Foundation (ASF) under one or more  * contributor license agreements.  See the NOTICE file distributed with  * this work for additional information regarding copyright ownership.  * The ASF licenses this file to You under the Apache License, Version 2.0  * (the "License"); you may not use this file except in compliance with  * the License.  You may obtain a copy of the License at  *  *     http://www.apache.org/licenses/LICENSE-2.0  *  * Unless required by applicable law or agreed to in writing, software  * distributed under the License is distributed on an "AS IS" BASIS,  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  * See the License for the specific language governing permissions and  * limitations under the License.  */
end_comment
begin_package
DECL|package|org.apache.lucene.spatial3d.geom
package|package
name|org
operator|.
name|apache
operator|.
name|lucene
operator|.
name|spatial3d
operator|.
name|geom
package|;
end_package
begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|lucene
operator|.
name|util
operator|.
name|LuceneTestCase
import|;
end_import
begin_import
import|import
name|org
operator|.
name|junit
operator|.
name|Test
import|;
end_import
begin_class
DECL|class|GeoCircleTest
specifier|public
class|class
name|GeoCircleTest
extends|extends
name|LuceneTestCase
block|{
annotation|@
name|Test
DECL|method|testCircleDistance
specifier|public
name|void
name|testCircleDistance
parameter_list|()
block|{
name|GeoCircle
name|c
decl_stmt|;
name|GeoPoint
name|gp
decl_stmt|;
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|0.5
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|Double
operator|.
name|POSITIVE_INFINITY
argument_list|,
name|c
operator|.
name|computeDistance
argument_list|(
name|DistanceStyle
operator|.
name|ARC
argument_list|,
name|gp
argument_list|)
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|Double
operator|.
name|POSITIVE_INFINITY
argument_list|,
name|c
operator|.
name|computeDistance
argument_list|(
name|DistanceStyle
operator|.
name|NORMAL
argument_list|,
name|gp
argument_list|)
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|Double
operator|.
name|POSITIVE_INFINITY
argument_list|,
name|c
operator|.
name|computeDistance
argument_list|(
name|DistanceStyle
operator|.
name|NORMAL
argument_list|,
name|gp
argument_list|)
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|0.5
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.0
argument_list|,
name|c
operator|.
name|computeDistance
argument_list|(
name|DistanceStyle
operator|.
name|ARC
argument_list|,
name|gp
argument_list|)
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.0
argument_list|,
name|c
operator|.
name|computeDistance
argument_list|(
name|DistanceStyle
operator|.
name|NORMAL
argument_list|,
name|gp
argument_list|)
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.0
argument_list|,
name|c
operator|.
name|computeDistance
argument_list|(
name|DistanceStyle
operator|.
name|NORMAL
argument_list|,
name|gp
argument_list|)
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.05
argument_list|,
operator|-
literal|0.5
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.05
argument_list|,
name|c
operator|.
name|computeDistance
argument_list|(
name|DistanceStyle
operator|.
name|ARC
argument_list|,
name|gp
argument_list|)
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.049995
argument_list|,
name|c
operator|.
name|computeDistance
argument_list|(
name|DistanceStyle
operator|.
name|LINEAR
argument_list|,
name|gp
argument_list|)
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.049979
argument_list|,
name|c
operator|.
name|computeDistance
argument_list|(
name|DistanceStyle
operator|.
name|NORMAL
argument_list|,
name|gp
argument_list|)
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testCircleFullWorld
specifier|public
name|void
name|testCircleFullWorld
parameter_list|()
block|{
name|GeoCircle
name|c
decl_stmt|;
name|GeoPoint
name|gp
decl_stmt|;
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|0.5
argument_list|,
name|Math
operator|.
name|PI
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|0.5
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|0.55
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|0.45
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
name|Math
operator|.
name|PI
operator|*
literal|0.5
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
name|Math
operator|.
name|PI
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
name|LatLonBounds
name|b
init|=
operator|new
name|LatLonBounds
argument_list|()
decl_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testCirclePointWithin
specifier|public
name|void
name|testCirclePointWithin
parameter_list|()
block|{
name|GeoCircle
name|c
decl_stmt|;
name|GeoPoint
name|gp
decl_stmt|;
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|0.5
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.4
argument_list|,
name|c
operator|.
name|computeOutsideDistance
argument_list|(
name|DistanceStyle
operator|.
name|ARC
argument_list|,
name|gp
argument_list|)
argument_list|,
literal|1e-12
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.12
argument_list|,
name|c
operator|.
name|computeOutsideDistance
argument_list|(
name|DistanceStyle
operator|.
name|NORMAL
argument_list|,
name|gp
argument_list|)
argument_list|,
literal|0.01
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.4
argument_list|,
name|c
operator|.
name|computeOutsideDistance
argument_list|(
name|DistanceStyle
operator|.
name|LINEAR
argument_list|,
name|gp
argument_list|)
argument_list|,
literal|0.01
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|0.5
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|0.55
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|0.45
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
name|Math
operator|.
name|PI
operator|*
literal|0.5
argument_list|,
literal|0.0
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
name|gp
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
name|Math
operator|.
name|PI
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testCircleBounds
specifier|public
name|void
name|testCircleBounds
parameter_list|()
block|{
name|GeoCircle
name|c
decl_stmt|;
name|LatLonBounds
name|b
decl_stmt|;
name|XYZBounds
name|xyzb
decl_stmt|;
name|GeoArea
name|area
decl_stmt|;
name|GeoPoint
name|p1
decl_stmt|;
name|GeoPoint
name|p2
decl_stmt|;
name|int
name|relationship
decl_stmt|;
comment|// ...
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|WGS84
argument_list|,
operator|-
literal|0.005931145568901605
argument_list|,
operator|-
literal|0.001942031539653079
argument_list|,
literal|1.2991918568260272E
operator|-
literal|4
argument_list|)
expr_stmt|;
name|area
operator|=
name|GeoAreaFactory
operator|.
name|makeGeoArea
argument_list|(
name|PlanetModel
operator|.
name|WGS84
argument_list|,
literal|1.001098377143621
argument_list|,
literal|1.001100011578687
argument_list|,
operator|-
literal|0.00207467080358696
argument_list|,
operator|-
literal|0.0018136665346280983
argument_list|,
operator|-
literal|0.006067808248760161
argument_list|,
operator|-
literal|0.005807683665759485
argument_list|)
expr_stmt|;
name|p1
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|WGS84
argument_list|,
operator|-
literal|0.00591253844632244
argument_list|,
operator|-
literal|0.0020069187259065093
argument_list|)
expr_stmt|;
name|p2
operator|=
operator|new
name|GeoPoint
argument_list|(
literal|1.001099185736782
argument_list|,
operator|-
literal|0.0020091272069679327
argument_list|,
operator|-
literal|0.005919118245803968
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|p1
argument_list|)
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|area
operator|.
name|isWithin
argument_list|(
name|p1
argument_list|)
argument_list|)
expr_stmt|;
name|relationship
operator|=
name|area
operator|.
name|getRelationship
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|relationship
operator|!=
name|GeoArea
operator|.
name|DISJOINT
argument_list|)
expr_stmt|;
comment|// Twelfth BKD discovered failure
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|WGS84
argument_list|,
operator|-
literal|0.00824379317765984
argument_list|,
operator|-
literal|0.0011677469001838581
argument_list|,
literal|0.0011530035396910402
argument_list|)
expr_stmt|;
name|p1
operator|=
operator|new
name|GeoPoint
argument_list|(
name|PlanetModel
operator|.
name|WGS84
argument_list|,
operator|-
literal|0.006505092992723671
argument_list|,
literal|0.007654282718327381
argument_list|)
expr_stmt|;
name|p2
operator|=
operator|new
name|GeoPoint
argument_list|(
literal|1.0010681673665647
argument_list|,
literal|0.007662608264336381
argument_list|,
operator|-
literal|0.006512324005914593
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
operator|!
name|c
operator|.
name|isWithin
argument_list|(
name|p1
argument_list|)
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
operator|!
name|c
operator|.
name|isWithin
argument_list|(
name|p2
argument_list|)
argument_list|)
expr_stmt|;
name|xyzb
operator|=
operator|new
name|XYZBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|xyzb
argument_list|)
expr_stmt|;
name|area
operator|=
name|GeoAreaFactory
operator|.
name|makeGeoArea
argument_list|(
name|PlanetModel
operator|.
name|WGS84
argument_list|,
name|xyzb
operator|.
name|getMinimumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumZ
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumZ
argument_list|()
argument_list|)
expr_stmt|;
name|relationship
operator|=
name|area
operator|.
name|getRelationship
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|relationship
operator|==
name|GeoArea
operator|.
name|OVERLAPS
operator|||
name|relationship
operator|==
name|GeoArea
operator|.
name|WITHIN
argument_list|)
expr_stmt|;
comment|// Eleventh BKD discovered failure
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
operator|-
literal|0.004431288600558495
argument_list|,
operator|-
literal|0.003687846671278374
argument_list|,
literal|1.704543429364245E
operator|-
literal|8
argument_list|)
expr_stmt|;
name|xyzb
operator|=
operator|new
name|XYZBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|xyzb
argument_list|)
expr_stmt|;
name|area
operator|=
name|GeoAreaFactory
operator|.
name|makeGeoArea
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
name|xyzb
operator|.
name|getMinimumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumZ
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumZ
argument_list|()
argument_list|)
expr_stmt|;
comment|//System.err.println(area);
name|relationship
operator|=
name|area
operator|.
name|getRelationship
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|GeoArea
operator|.
name|WITHIN
operator|==
name|relationship
operator|||
name|GeoArea
operator|.
name|OVERLAPS
operator|==
name|relationship
argument_list|)
expr_stmt|;
comment|// Tenth BKD discovered failure
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|WGS84
argument_list|,
operator|-
literal|0.0018829770647349636
argument_list|,
operator|-
literal|0.001969499061382591
argument_list|,
literal|1.3045439293158305E
operator|-
literal|5
argument_list|)
expr_stmt|;
name|xyzb
operator|=
operator|new
name|XYZBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|xyzb
argument_list|)
expr_stmt|;
name|area
operator|=
name|GeoAreaFactory
operator|.
name|makeGeoArea
argument_list|(
name|PlanetModel
operator|.
name|WGS84
argument_list|,
name|xyzb
operator|.
name|getMinimumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumZ
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumZ
argument_list|()
argument_list|)
expr_stmt|;
comment|//System.err.println(area);
name|relationship
operator|=
name|area
operator|.
name|getRelationship
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|GeoArea
operator|.
name|WITHIN
operator|==
name|relationship
operator|||
name|GeoArea
operator|.
name|OVERLAPS
operator|==
name|relationship
argument_list|)
expr_stmt|;
comment|// Ninth BKD discovered failure
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
operator|-
literal|4.211990380885122E
operator|-
literal|5
argument_list|,
operator|-
literal|0.0022958453508173044
argument_list|,
literal|1.4318475623498535E
operator|-
literal|5
argument_list|)
expr_stmt|;
name|xyzb
operator|=
operator|new
name|XYZBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|xyzb
argument_list|)
expr_stmt|;
name|area
operator|=
name|GeoAreaFactory
operator|.
name|makeGeoArea
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
name|xyzb
operator|.
name|getMinimumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumZ
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumZ
argument_list|()
argument_list|)
expr_stmt|;
comment|//System.err.println(area);
name|relationship
operator|=
name|area
operator|.
name|getRelationship
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|GeoArea
operator|.
name|WITHIN
operator|==
name|relationship
operator|||
name|GeoArea
operator|.
name|OVERLAPS
operator|==
name|relationship
argument_list|)
expr_stmt|;
comment|// Eighth BKD discovered failure
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.005321278689117842
argument_list|,
operator|-
literal|0.00216937368755372
argument_list|,
literal|1.5306034422500785E
operator|-
literal|4
argument_list|)
expr_stmt|;
name|xyzb
operator|=
operator|new
name|XYZBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|xyzb
argument_list|)
expr_stmt|;
name|area
operator|=
name|GeoAreaFactory
operator|.
name|makeGeoArea
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
name|xyzb
operator|.
name|getMinimumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumZ
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumZ
argument_list|()
argument_list|)
expr_stmt|;
comment|//System.err.println(area);
name|relationship
operator|=
name|area
operator|.
name|getRelationship
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|GeoArea
operator|.
name|WITHIN
operator|==
name|relationship
operator|||
name|GeoArea
operator|.
name|OVERLAPS
operator|==
name|relationship
argument_list|)
expr_stmt|;
comment|// Seventh BKD discovered failure
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
operator|-
literal|0.0021627146783861745
argument_list|,
operator|-
literal|0.0017298167021592304
argument_list|,
literal|2.0818312293195752E
operator|-
literal|4
argument_list|)
expr_stmt|;
name|xyzb
operator|=
operator|new
name|XYZBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|xyzb
argument_list|)
expr_stmt|;
name|area
operator|=
name|GeoAreaFactory
operator|.
name|makeGeoArea
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
name|xyzb
operator|.
name|getMinimumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumZ
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumZ
argument_list|()
argument_list|)
expr_stmt|;
comment|//System.err.println(area);
name|relationship
operator|=
name|area
operator|.
name|getRelationship
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|GeoArea
operator|.
name|WITHIN
operator|==
name|relationship
operator|||
name|GeoArea
operator|.
name|OVERLAPS
operator|==
name|relationship
argument_list|)
expr_stmt|;
comment|// Sixth BKD discovered failure
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|WGS84
argument_list|,
operator|-
literal|0.006450320645814321
argument_list|,
literal|0.004660694205115142
argument_list|,
literal|0.00489710732634323
argument_list|)
expr_stmt|;
comment|//xyzb = new XYZBounds();
comment|//c.getBounds(xyzb);
comment|//System.err.println("xmin="+xyzb.getMinimumX()+", xmax="+xyzb.getMaximumX()+",ymin="+xyzb.getMinimumY()+", ymax="+xyzb.getMaximumY()+",zmin="+xyzb.getMinimumZ()+", zmax="+xyzb.getMaximumZ());
comment|//xmin=1.0010356621420726, xmax=1.0011141249179447,ymin=-2.5326643901354566E-4, ymax=0.009584741915757169,zmin=-0.011359874956269283, zmax=-0.0015549504447452225
name|area
operator|=
name|GeoAreaFactory
operator|.
name|makeGeoArea
argument_list|(
name|PlanetModel
operator|.
name|WGS84
argument_list|,
literal|1.0010822580620098
argument_list|,
literal|1.0010945779732867
argument_list|,
literal|0.007079167343247293
argument_list|,
literal|0.007541006774427837
argument_list|,
operator|-
literal|0.0021855011220022575
argument_list|,
operator|-
literal|0.001896122718181518
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|GeoArea
operator|.
name|CONTAINS
operator|!=
name|area
operator|.
name|getRelationship
argument_list|(
name|c
argument_list|)
argument_list|)
expr_stmt|;
comment|/*     p1 = new GeoPoint(1.0010893045436076,0.007380935180644008,-0.002140671370616495);     // This has a different bounding box, so we can't use it.     //p2 = new GeoPoint(PlanetModel.WGS84,-0.002164069780096702, 0.007505617500830066);     p2 = new GeoPoint(PlanetModel.WGS84,p1.getLatitude(),p1.getLongitude());     assertTrue(PlanetModel.WGS84.pointOnSurface(p2));     assertTrue(!c.isWithin(p2));     assertTrue(!area.isWithin(p2));     assertTrue(!c.isWithin(p1));     assertTrue(PlanetModel.WGS84.pointOnSurface(p1)); // This fails     assertTrue(!area.isWithin(p1)); // This fails     */
comment|// Fifth BKD discovered failure
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
operator|-
literal|0.004282454525970269
argument_list|,
operator|-
literal|1.6739831367422277E
operator|-
literal|4
argument_list|,
literal|1.959639723134033E
operator|-
literal|6
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|c
operator|.
name|getEdgePoints
argument_list|()
index|[
literal|0
index|]
argument_list|)
argument_list|)
expr_stmt|;
name|xyzb
operator|=
operator|new
name|XYZBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|xyzb
argument_list|)
expr_stmt|;
name|area
operator|=
name|GeoAreaFactory
operator|.
name|makeGeoArea
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
name|xyzb
operator|.
name|getMinimumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumZ
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumZ
argument_list|()
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|GeoArea
operator|.
name|WITHIN
operator|==
name|area
operator|.
name|getRelationship
argument_list|(
name|c
argument_list|)
operator|||
name|GeoArea
operator|.
name|OVERLAPS
operator|==
name|area
operator|.
name|getRelationship
argument_list|(
name|c
argument_list|)
argument_list|)
expr_stmt|;
comment|// Fourth BKD discovered failure
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
operator|-
literal|0.0048795517261255
argument_list|,
literal|0.004053904306995974
argument_list|,
literal|5.93699764258874E
operator|-
literal|6
argument_list|)
expr_stmt|;
name|xyzb
operator|=
operator|new
name|XYZBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|xyzb
argument_list|)
expr_stmt|;
name|area
operator|=
name|GeoAreaFactory
operator|.
name|makeGeoArea
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
name|xyzb
operator|.
name|getMinimumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumZ
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumZ
argument_list|()
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|GeoArea
operator|.
name|WITHIN
operator|==
name|area
operator|.
name|getRelationship
argument_list|(
name|c
argument_list|)
operator|||
name|GeoArea
operator|.
name|OVERLAPS
operator|==
name|area
operator|.
name|getRelationship
argument_list|(
name|c
argument_list|)
argument_list|)
expr_stmt|;
comment|// Another test case from BKD
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
operator|-
literal|0.005955031040627789
argument_list|,
operator|-
literal|0.0029274772647399153
argument_list|,
literal|1.601488279374338E
operator|-
literal|5
argument_list|)
expr_stmt|;
name|xyzb
operator|=
operator|new
name|XYZBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|xyzb
argument_list|)
expr_stmt|;
name|area
operator|=
name|GeoAreaFactory
operator|.
name|makeGeoArea
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
name|xyzb
operator|.
name|getMinimumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumX
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumY
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMinimumZ
argument_list|()
argument_list|,
name|xyzb
operator|.
name|getMaximumZ
argument_list|()
argument_list|)
expr_stmt|;
name|relationship
operator|=
name|area
operator|.
name|getRelationship
argument_list|(
name|c
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|relationship
operator|==
name|GeoArea
operator|.
name|WITHIN
operator|||
name|relationship
operator|==
name|GeoArea
operator|.
name|OVERLAPS
argument_list|)
expr_stmt|;
comment|// Test case from BKD
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
operator|-
literal|0.765816119338
argument_list|,
literal|0.991848766844
argument_list|,
literal|0.8153163226330487
argument_list|)
expr_stmt|;
name|p1
operator|=
operator|new
name|GeoPoint
argument_list|(
literal|0.7692262265236023
argument_list|,
operator|-
literal|0.055089298115534646
argument_list|,
operator|-
literal|0.6365973465711254
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|c
operator|.
name|isWithin
argument_list|(
name|p1
argument_list|)
argument_list|)
expr_stmt|;
name|xyzb
operator|=
operator|new
name|XYZBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|xyzb
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|p1
operator|.
name|x
operator|>=
name|xyzb
operator|.
name|getMinimumX
argument_list|()
operator|&&
name|p1
operator|.
name|x
operator|<=
name|xyzb
operator|.
name|getMaximumX
argument_list|()
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|p1
operator|.
name|y
operator|>=
name|xyzb
operator|.
name|getMinimumY
argument_list|()
operator|&&
name|p1
operator|.
name|y
operator|<=
name|xyzb
operator|.
name|getMaximumY
argument_list|()
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|p1
operator|.
name|z
operator|>=
name|xyzb
operator|.
name|getMinimumZ
argument_list|()
operator|&&
name|p1
operator|.
name|z
operator|<=
name|xyzb
operator|.
name|getMaximumZ
argument_list|()
argument_list|)
expr_stmt|;
comment|// Vertical circle cases
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
operator|-
literal|0.5
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.6
argument_list|,
name|b
operator|.
name|getLeftLongitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.4
argument_list|,
name|b
operator|.
name|getRightLongitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.1
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
literal|0.5
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.4
argument_list|,
name|b
operator|.
name|getLeftLongitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.6
argument_list|,
name|b
operator|.
name|getRightLongitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.1
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
literal|0.0
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getLeftLongitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.1
argument_list|,
name|b
operator|.
name|getRightLongitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.1
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.0
argument_list|,
name|Math
operator|.
name|PI
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|Math
operator|.
name|PI
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getLeftLongitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
name|Math
operator|.
name|PI
operator|+
literal|0.1
argument_list|,
name|b
operator|.
name|getRightLongitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.1
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
comment|// Horizontal circle cases
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
name|Math
operator|.
name|PI
operator|*
literal|0.5
argument_list|,
literal|0.0
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|Math
operator|.
name|PI
operator|*
literal|0.5
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
operator|-
name|Math
operator|.
name|PI
operator|*
literal|0.5
argument_list|,
literal|0.0
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
name|Math
operator|.
name|PI
operator|*
literal|0.5
operator|+
literal|0.1
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
comment|// Now do a somewhat tilted plane, facing different directions.
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.01
argument_list|,
literal|0.0
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.11
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.09
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getLeftLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.1
argument_list|,
name|b
operator|.
name|getRightLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.01
argument_list|,
name|Math
operator|.
name|PI
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.11
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.09
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|Math
operator|.
name|PI
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getLeftLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
name|Math
operator|.
name|PI
operator|+
literal|0.1
argument_list|,
name|b
operator|.
name|getRightLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.01
argument_list|,
name|Math
operator|.
name|PI
operator|*
literal|0.5
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.11
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.09
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|Math
operator|.
name|PI
operator|*
literal|0.5
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getLeftLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|Math
operator|.
name|PI
operator|*
literal|0.5
operator|+
literal|0.1
argument_list|,
name|b
operator|.
name|getRightLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.01
argument_list|,
operator|-
name|Math
operator|.
name|PI
operator|*
literal|0.5
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.11
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.09
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
name|Math
operator|.
name|PI
operator|*
literal|0.5
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getLeftLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
name|Math
operator|.
name|PI
operator|*
literal|0.5
operator|+
literal|0.1
argument_list|,
name|b
operator|.
name|getRightLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
comment|// Slightly tilted, PI/4 direction.
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.01
argument_list|,
name|Math
operator|.
name|PI
operator|*
literal|0.25
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.11
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.09
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|Math
operator|.
name|PI
operator|*
literal|0.25
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getLeftLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|Math
operator|.
name|PI
operator|*
literal|0.25
operator|+
literal|0.1
argument_list|,
name|b
operator|.
name|getRightLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.01
argument_list|,
operator|-
name|Math
operator|.
name|PI
operator|*
literal|0.25
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.11
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.09
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
name|Math
operator|.
name|PI
operator|*
literal|0.25
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getLeftLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
name|Math
operator|.
name|PI
operator|*
literal|0.25
operator|+
literal|0.1
argument_list|,
name|b
operator|.
name|getRightLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
operator|-
literal|0.01
argument_list|,
name|Math
operator|.
name|PI
operator|*
literal|0.25
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.09
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.11
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|Math
operator|.
name|PI
operator|*
literal|0.25
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getLeftLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
name|Math
operator|.
name|PI
operator|*
literal|0.25
operator|+
literal|0.1
argument_list|,
name|b
operator|.
name|getRightLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
operator|-
literal|0.01
argument_list|,
operator|-
name|Math
operator|.
name|PI
operator|*
literal|0.25
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.09
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.11
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
name|Math
operator|.
name|PI
operator|*
literal|0.25
operator|-
literal|0.1
argument_list|,
name|b
operator|.
name|getLeftLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
name|Math
operator|.
name|PI
operator|*
literal|0.25
operator|+
literal|0.1
argument_list|,
name|b
operator|.
name|getRightLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
comment|// Now do a somewhat tilted plane.
name|c
operator|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|SPHERE
argument_list|,
literal|0.01
argument_list|,
operator|-
literal|0.5
argument_list|,
literal|0.1
argument_list|)
expr_stmt|;
name|b
operator|=
operator|new
name|LatLonBounds
argument_list|()
expr_stmt|;
name|c
operator|.
name|getBounds
argument_list|(
name|b
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoLongitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoTopLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertFalse
argument_list|(
name|b
operator|.
name|checkNoBottomLatitudeBound
argument_list|()
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
literal|0.11
argument_list|,
name|b
operator|.
name|getMaxLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.09
argument_list|,
name|b
operator|.
name|getMinLatitude
argument_list|()
argument_list|,
literal|0.000001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.6
argument_list|,
name|b
operator|.
name|getLeftLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
name|assertEquals
argument_list|(
operator|-
literal|0.4
argument_list|,
name|b
operator|.
name|getRightLongitude
argument_list|()
argument_list|,
literal|0.00001
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Test
DECL|method|testBoundsFailureCase1
specifier|public
name|void
name|testBoundsFailureCase1
parameter_list|()
block|{
comment|// lat=2.7399499693409367E-13, lon=-3.141592653589793([X=-1.0011188539924791, Y=-1.226017000107956E-16, Z=2.743015573303327E-13])], radius=2.1814042682464985
specifier|final
name|GeoCircle
name|gc
init|=
name|GeoCircleFactory
operator|.
name|makeGeoCircle
argument_list|(
name|PlanetModel
operator|.
name|WGS84
argument_list|,
literal|2.7399499693409367E
operator|-
literal|13
argument_list|,
operator|-
literal|3.141592653589793
argument_list|,
literal|2.1814042682464985
argument_list|)
decl_stmt|;
comment|// With a circle like this, zmin should equal zmax, and xmin should be PlanetModel.minimumX.
specifier|final
name|GeoPoint
name|gp
init|=
operator|new
name|GeoPoint
argument_list|(
literal|0.0054866241253590815
argument_list|,
operator|-
literal|0.004009749293376541
argument_list|,
literal|0.997739304376186
argument_list|)
decl_stmt|;
specifier|final
name|GeoPoint
name|gpOnSurface
init|=
name|PlanetModel
operator|.
name|WGS84
operator|.
name|createSurfacePoint
argument_list|(
name|gp
argument_list|)
decl_stmt|;
specifier|final
name|XYZBounds
name|bounds
init|=
operator|new
name|XYZBounds
argument_list|()
decl_stmt|;
name|gc
operator|.
name|getBounds
argument_list|(
name|bounds
argument_list|)
expr_stmt|;
comment|//System.out.println("Bounds: "+bounds);
specifier|final
name|XYZSolid
name|solid
init|=
name|XYZSolidFactory
operator|.
name|makeXYZSolid
argument_list|(
name|PlanetModel
operator|.
name|WGS84
argument_list|,
name|bounds
operator|.
name|getMinimumX
argument_list|()
argument_list|,
name|bounds
operator|.
name|getMaximumX
argument_list|()
argument_list|,
name|bounds
operator|.
name|getMinimumY
argument_list|()
argument_list|,
name|bounds
operator|.
name|getMaximumY
argument_list|()
argument_list|,
name|bounds
operator|.
name|getMinimumZ
argument_list|()
argument_list|,
name|bounds
operator|.
name|getMaximumZ
argument_list|()
argument_list|)
decl_stmt|;
name|assertTrue
argument_list|(
name|gc
operator|.
name|isWithin
argument_list|(
name|gpOnSurface
argument_list|)
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|gc
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
name|assertTrue
argument_list|(
name|solid
operator|.
name|isWithin
argument_list|(
name|gpOnSurface
argument_list|)
argument_list|)
expr_stmt|;
comment|// This fails
name|assertTrue
argument_list|(
name|solid
operator|.
name|isWithin
argument_list|(
name|gp
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
end_class
end_unit
