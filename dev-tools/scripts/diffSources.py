begin_unit
comment|'# Licensed to the Apache Software Foundation (ASF) under one or more'
nl|'\n'
comment|'# contributor license agreements.  See the NOTICE file distributed with'
nl|'\n'
comment|'# this work for additional information regarding copyright ownership.'
nl|'\n'
comment|'# The ASF licenses this file to You under the Apache License, Version 2.0'
nl|'\n'
comment|'# (the "License"); you may not use this file except in compliance with'
nl|'\n'
comment|'# the License.  You may obtain a copy of the License at'
nl|'\n'
comment|'#'
nl|'\n'
comment|'#     http://www.apache.org/licenses/LICENSE-2.0'
nl|'\n'
comment|'#'
nl|'\n'
comment|'# Unless required by applicable law or agreed to in writing, software'
nl|'\n'
comment|'# distributed under the License is distributed on an "AS IS" BASIS,'
nl|'\n'
comment|'# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.'
nl|'\n'
comment|'# See the License for the specific language governing permissions and'
nl|'\n'
comment|'# limitations under the License.'
nl|'\n'
nl|'\n'
name|'import'
name|'subprocess'
newline|'\n'
name|'import'
name|'sys'
newline|'\n'
name|'import'
name|'os'
newline|'\n'
nl|'\n'
comment|'# recursive, unified output format, treat missing files as present but empty'
nl|'\n'
DECL|variable|DIFF_FLAGS
name|'DIFF_FLAGS'
op|'='
string|"'-ruN'"
newline|'\n'
nl|'\n'
name|'if'
string|"'-skipWhitespace'"
name|'in'
name|'sys'
op|'.'
name|'argv'
op|':'
newline|'\n'
indent|'  '
name|'sys'
op|'.'
name|'argv'
op|'.'
name|'remove'
op|'('
string|"'-skipWhitespace'"
op|')'
newline|'\n'
comment|'# ignores only whitespace changes'
nl|'\n'
name|'DIFF_FLAGS'
op|'+='
string|"'bBw'"
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'len'
op|'('
name|'sys'
op|'.'
name|'argv'
op|')'
op|'!='
number|'3'
op|':'
newline|'\n'
indent|'  '
name|'print'
newline|'\n'
name|'print'
string|"'Usage: python -u diffSources.py <dir1> <dir2> [-skipWhitespace]'"
newline|'\n'
name|'print'
newline|'\n'
name|'print'
string|'\'\'\'This tool creates an applying patch between two directories.\n\nWhile you could use this to make a committable patch from a branch, that approach loses\nthe svn history from the branch (better to use "svn merge --reintegrate", for example).  This\ndiff output should not be considered "authoritative" from a merging standpoint as it does\nnot reflect what svn will do on merge.\n\'\'\''
newline|'\n'
name|'print'
newline|'\n'
name|'sys'
op|'.'
name|'exit'
op|'('
number|'0'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|p
dedent|''
name|'p'
op|'='
name|'subprocess'
op|'.'
name|'Popen'
op|'('
op|'['
string|"'diff'"
op|','
name|'DIFF_FLAGS'
op|','
string|"'-x'"
op|','
string|"'.svn'"
op|','
string|"'-x'"
op|','
string|"'build'"
op|','
name|'sys'
op|'.'
name|'argv'
op|'['
number|'1'
op|']'
op|','
name|'sys'
op|'.'
name|'argv'
op|'['
number|'2'
op|']'
op|']'
op|','
name|'shell'
op|'='
name|'False'
op|','
name|'stdout'
op|'='
name|'subprocess'
op|'.'
name|'PIPE'
op|')'
newline|'\n'
nl|'\n'
DECL|variable|keep
name|'keep'
op|'='
name|'False'
newline|'\n'
name|'while'
name|'True'
op|':'
newline|'\n'
DECL|variable|l
indent|'  '
name|'l'
op|'='
name|'p'
op|'.'
name|'stdout'
op|'.'
name|'readline'
op|'('
op|')'
newline|'\n'
name|'if'
name|'l'
op|'=='
string|"''"
op|':'
newline|'\n'
indent|'    '
name|'break'
newline|'\n'
dedent|''
name|'if'
name|'l'
op|'.'
name|'endswith'
op|'('
string|"'\\r\\n'"
op|')'
op|':'
newline|'\n'
DECL|variable|l
indent|'    '
name|'l'
op|'='
name|'l'
op|'['
op|':'
op|'-'
number|'2'
op|']'
newline|'\n'
dedent|''
name|'elif'
name|'l'
op|'.'
name|'endswith'
op|'('
string|"'\\n'"
op|')'
op|':'
newline|'\n'
DECL|variable|l
indent|'    '
name|'l'
op|'='
name|'l'
op|'['
op|':'
op|'-'
number|'1'
op|']'
newline|'\n'
dedent|''
name|'if'
name|'l'
op|'.'
name|'startswith'
op|'('
string|"'diff '"
op|')'
name|'or'
name|'l'
op|'.'
name|'startswith'
op|'('
string|"'Binary files '"
op|')'
op|':'
newline|'\n'
nl|'\n'
indent|'    '
name|'if'
name|'l'
op|'.'
name|'endswith'
op|'('
string|"'timehints.txt'"
op|')'
name|'or'
name|'l'
op|'.'
name|'find'
op|'('
string|"'/build/'"
op|')'
op|'!='
op|'-'
number|'1'
name|'or'
name|'l'
op|'.'
name|'find'
op|'('
string|"'/.svn/'"
op|')'
op|'!='
op|'-'
number|'1'
op|':'
newline|'\n'
DECL|variable|keep
indent|'      '
name|'keep'
op|'='
name|'False'
newline|'\n'
dedent|''
name|'elif'
name|'l'
op|'.'
name|'lower'
op|'('
op|')'
op|'.'
name|'startswith'
op|'('
string|"'Only in'"
op|')'
op|':'
newline|'\n'
DECL|variable|keep
indent|'      '
name|'keep'
op|'='
name|'True'
newline|'\n'
dedent|''
name|'elif'
name|'l'
op|'.'
name|'find'
op|'('
string|"'/META-INF/'"
op|')'
op|'!='
op|'-'
number|'1'
op|':'
newline|'\n'
DECL|variable|keep
indent|'      '
name|'keep'
op|'='
name|'True'
newline|'\n'
dedent|''
name|'else'
op|':'
newline|'\n'
DECL|variable|ext
indent|'      '
name|'ext'
op|'='
name|'os'
op|'.'
name|'path'
op|'.'
name|'splitext'
op|'('
name|'l'
op|')'
op|'['
op|'-'
number|'1'
op|']'
newline|'\n'
DECL|variable|keep
name|'keep'
op|'='
name|'ext'
name|'in'
op|'('
string|"'.xml'"
op|','
string|"'.iml'"
op|','
string|"'.html'"
op|','
string|"'.template'"
op|','
string|"'.py'"
op|','
string|"'.g'"
op|','
string|"'.properties'"
op|','
string|"'.java'"
op|')'
newline|'\n'
nl|'\n'
dedent|''
name|'if'
name|'keep'
op|':'
newline|'\n'
indent|'      '
name|'print'
newline|'\n'
name|'print'
newline|'\n'
name|'print'
name|'l'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
dedent|''
dedent|''
name|'elif'
name|'keep'
op|':'
newline|'\n'
indent|'    '
name|'print'
name|'l'
newline|'\n'
dedent|''
name|'elif'
name|'l'
op|'.'
name|'startswith'
op|'('
string|"'Only in'"
op|')'
op|':'
newline|'\n'
indent|'    '
name|'print'
name|'l'
op|'.'
name|'strip'
op|'('
op|')'
newline|'\n'
dedent|''
dedent|''
endmarker|''
end_unit
